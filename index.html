<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Система электронной очереди</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
}

/* Верхнее меню */
nav {
  background: #222;
  padding: 10px;
  display: flex;
  gap: 10px;
}

nav button {
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}

/* Экраны */
.screen {
  display: none;
  height: calc(100vh - 60px);
  padding: 20px;
}

.screen.active {
  display: flex;
}

.center {
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* Кнопка fullscreen */
.fullscreen-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  padding: 8px 12px;
  font-size: 14px;
  cursor: pointer;
}

/* Экран 1 */
.big {
  font-size: 80px;
  margin: 20px;
}

/* Экран ТВ */
.tv {
  background: black;
  color: white;
  justify-content: space-around;
  align-items: center;
}

.queue {
  font-size: 40px;
}

.call {
  font-size: 50px;
  color: yellow;
}

.current {
  font-size: 120px;
  color: red;
}

/* Экран оператора */
.list button {
  width: 100%;
  padding: 15px;
  font-size: 20px;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<nav>
  <button onclick="showScreen(1)">Экран 1 — Талон</button>
  <button onclick="showScreen(2)">Экран 2 — ТВ</button>
  <button onclick="showScreen(3)">Экран 3 — Оператор</button>
</nav>

<!-- ЭКРАН 1 -->
<div id="screen1" class="screen center active">
  <button class="fullscreen-btn" onclick="goFullscreen('screen1')">⛶ На весь экран</button>
  <h1>Получение талона</h1>
  <div id="ticketNumber" class="big">—</div>
  <button onclick="getTicket()">Получить талон</button>
</div>

<!-- ЭКРАН 2 -->
<div id="screen2" class="screen tv">
  <button class="fullscreen-btn" onclick="goFullscreen('screen2')">⛶ На весь экран</button>

  <div>
    <h1>Очередь</h1>
    <div id="queue" class="queue"></div>
  </div>

  <div>
    <div class="call">Подойдите</div>
    <div id="current" class="current">—</div>
  </div>
</div>

<!-- ЭКРАН 3 -->
<div id="screen3" class="screen">
  <button class="fullscreen-btn" onclick="goFullscreen('screen3')">⛶ На весь экран</button>
  <h1>Вызов талона</h1>
  <div id="tickets" class="list"></div>
</div>

<script>
let tickets = JSON.parse(localStorage.getItem("tickets")) || [];
let current = localStorage.getItem("current") || "—";

function save() {
  localStorage.setItem("tickets", JSON.stringify(tickets));
  localStorage.setItem("current", current);
}

/* Переключение экранов */
function showScreen(n) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById("screen" + n).classList.add("active");
}

/* Fullscreen */
function goFullscreen(id) {
  const el = document.getElementById(id);
  if (el.requestFullscreen) el.requestFullscreen();
  else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
}

/* Экран 1 */
function getTicket() {
  let num = "A" + String(tickets.length + 1).padStart(3, "0");
  tickets.push(num);
  save();
  document.getElementById("ticketNumber").innerText = num;
}

/* Обновление ТВ и оператора */
setInterval(() => {
  tickets = JSON.parse(localStorage.getItem("tickets")) || [];
  current = localStorage.getItem("current") || "—";

  document.getElementById("queue").innerText = tickets.join(" ");
  document.getElementById("current").innerText = current;

  const list = document.getElementById("tickets");
  list.innerHTML = "";
  tickets.forEach(t => {
    const btn = document.createElement("button");
    btn.innerText = t;
    btn.onclick = () => {
      current = t;
      tickets = tickets.filter(x => x !== t);
      save();
    };
    list.appendChild(btn);
  });
}, 500);
</script>

</body>
</html>
